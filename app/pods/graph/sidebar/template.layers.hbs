<div class="content">
  <div class="help jumbotron markdown">
    {{localized-tpl tpl="help/{locale}/graph/layers"}}
  </div>
  <div class="vertical airy flow layers">
    <div class="solid center text-center">
      {{#if model.geoDef}}
      {{#x-dropdown-plus as |facet|}}
        {{#facet.trigger}}
           <i class="iconfont iconfont-plus"></i> {{t "general.addAVariable"}}
        {{/facet.trigger}}
        {{#facet.list}}
          {{#each model.data.columns as |col|}}
          <li {{action 'addLayer' col}}>{{col.header.value}} {{data-type-icon meta=col.meta inconsistency=col.inconsistency}}</li>
          {{/each}}
        {{/facet.list}}
      {{/x-dropdown-plus}}
      {{else}}
      <div class="filled warning padded">
        Il est nécessaire de sélectionner une colonne de référence géographique pour ajouter de nouveaux calques
      </div>
      {{/if}}
    </div>

    {{#if model.graphLayers.length}}
    <div class="jumbotron">
      {{#drag-sort-collection provider=model.graphLayers as |layer self|}}
      
          <li class="clickable {{if (x-eq layer editedLayer) 'selected'}}">
            <div class="horizontal space-between flow layer-header">
              <div class="horizontal airy flow">
                <span class="layer-visualization-icon">
                {{#if layer.mapping.type}}
                  {{visualization-icon type=layer.mapping.type}}
                {{else}}
                  <i class="iconfont iconfont-question"></i>
                {{/if}}
                </span>
                <span class="layer-name">{{layer.mapping.varCol.header.value}}</span>
              </div>
              <div class="solid w4 text-right no-drag">
                <span>{{data-type-icon meta=layer.varCol.meta inconsistency=layer.mapping.varCol.inconsistency}}</span>
                {{#x-button action=(action 'editLayer' layer) disabled=(x-eq layer editedLayer)}}
                  <i class="iconfont iconfont-pencil"></i>
                {{/x-button}}
                <a {{action 'toggleLayerVisibility' layer}}><i class="iconfont {{if layer.visible 'iconfont-eye' 'iconfont-eye-slash'}}"></i></a>
                {{#x-button action=(action 'removeLayer' layer) disabled=(x-eq layer editedLayer)}}
                  <i class="iconfont iconfont-close"></i>
                {{/x-button}}
              </div>
            </div>
          </li>
          
      {{/drag-sort-collection}}
    </div>
    {{/if}}
    
  </div>
</div>

<div class="bottom-navbar">
    <div class="fluid">
      {{#x-button class="default btn-prev" action=(action 'back')}}
          <i class="iconfont iconfont-long-arrow-left"></i> {{x-capitalize (t "navigation.sidebar.layout")}}
      {{/x-button}}
    </div>
    <div class="fluid">
      {{#x-button class="default btn-prev" action=(action 'next')}}
          {{x-capitalize (t "navigation.sidebar.legend")}} <i class="iconfont iconfont-long-arrow-right"></i>
      {{/x-button}}
    </div>
</div>