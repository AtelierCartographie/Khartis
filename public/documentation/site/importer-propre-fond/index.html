



<!DOCTYPE html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation de Khartis, outil de cartographie thématique">
      
      
        <link rel="canonical" href="http://www.sciencespo.fr/cartographie/khartis/docs/importer-propre-fond/">
      
      
        <meta name="author" content="Sciences Po - Atelier de cartographie">
      
      
        <meta name="lang:clipboard.copy" content="Copier dans le presse-papier">
      
        <meta name="lang:clipboard.copied" content="Copié dans le presse-papier">
      
        <meta name="lang:search.language" content="fr">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="Aucun document trouvé">
      
        <meta name="lang:search.result.one" content="1 document trouvé">
      
        <meta name="lang:search.result.other" content="# documents trouvés">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Importer son propre fond de carte - Khartis Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#recuperer-le-fond-de-carte" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.sciencespo.fr/cartographie/khartis/docs" title="Khartis Documentation" class="md-header-nav__button md-logo">
          
            <img src="../assets/Khartis-logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Khartis Documentation
              </span>
              <span class="md-header-nav__topic">
                Importer son propre fond de carte
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Taper pour démarrer la recherche
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/AtelierCartographie/Khartis/" title="Aller au dépôt" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      AtelierCartographie/Khartis
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://www.sciencespo.fr/cartographie/khartis/docs" title="Khartis Documentation" class="md-nav__button md-logo">
      
        <img src="../assets/Khartis-logo.svg" width="48" height="48">
      
    </a>
    Khartis Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/AtelierCartographie/Khartis/" title="Aller au dépôt" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      AtelierCartographie/Khartis
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Accueil" class="md-nav__link">
      Accueil
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Tutoriels
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutoriels
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../premiers-pas-avec-Khartis-(1)/" title="Premiers pas avec Khartis (1)" class="md-nav__link">
      Premiers pas avec Khartis (1)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../premiers-pas-avec-Khartis-(2)/" title="Premiers pas avec Khartis (2)" class="md-nav__link">
      Premiers pas avec Khartis (2)
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Importer son propre fond de carte
      </label>
    
    <a href="./" title="Importer son propre fond de carte" class="md-nav__link md-nav__link--active">
      Importer son propre fond de carte
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table des matières</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recuperer-le-fond-de-carte" title="Récupérer le fond de carte" class="md-nav__link">
    Récupérer le fond de carte
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperer-les-donnees" title="Récupérer les données" class="md-nav__link">
    Récupérer les données
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importer-le-fond-de-carte-dans-khartis" title="Importer le fond de carte dans Khartis" class="md-nav__link">
    Importer le fond de carte dans Khartis
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-selection-de-lidentifiant" title="1. Sélection de l'identifiant" class="md-nav__link">
    1. Sélection de l'identifiant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-conserver-les-autres-variables" title="2. Conserver les autres variables ?" class="md-nav__link">
    2. Conserver les autres variables ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-simplification-optionnel-et-selon-le-fond" title="3. Simplification (optionnel et selon le fond)" class="md-nav__link">
    3. Simplification (optionnel et selon le fond)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-options-de-projection-optionnel" title="4. Options de projection (optionnel)" class="md-nav__link">
    4. Options de projection (optionnel)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importer-les-donnees-et-visualiser" title="Importer les données et visualiser" class="md-nav__link">
    Importer les données et visualiser
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gestion-etiquettes/" title="Gestion des étiquettes" class="md-nav__link">
      Gestion des étiquettes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Visualisations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Visualisations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../liste-des-visualisations/" title="Liste des visualisations" class="md-nav__link">
      Liste des visualisations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../symboles-proportionnels/" title="Symboles proportionnels" class="md-nav__link">
      Symboles proportionnels
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../couleurs-ordonnees/" title="Couleurs ordonnées" class="md-nav__link">
      Couleurs ordonnées
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../symboles-ordonnes/" title="Symboles ordonnées" class="md-nav__link">
      Symboles ordonnées
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../symboles-differents/" title="Symboles différents" class="md-nav__link">
      Symboles différents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../couleurs-differentes/" title="Couleurs différentes" class="md-nav__link">
      Couleurs différentes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../symboles-proportionnels-colores-ordre/" title="Symboles proportionnels colorés (ordre)" class="md-nav__link">
      Symboles proportionnels colorés (ordre)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../symboles-proportionnels-colores-difference/" title="Symboles proportionnels colorés (différence)" class="md-nav__link">
      Symboles proportionnels colorés (différence)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../double-symboles-proportionnels/" title="Double symboles proportionnels" class="md-nav__link">
      Double symboles proportionnels
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Ressources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Ressources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../importer-des-donnees/" title="Importer des données" class="md-nav__link">
      Importer des données
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../les-fonds-de-carte-disponibles/" title="Les fonds de carte disponibles" class="md-nav__link">
      Les fonds de carte disponibles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../les-projections-disponibles/" title="Les projections disponibles" class="md-nav__link">
      Les projections disponibles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../les-sources-des-exemples-a-disposition/" title="Les sources des exemples à disposition" class="md-nav__link">
      Les sources des exemples à disposition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../discretisation/" title="Discrétisation" class="md-nav__link">
      Discrétisation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contraste/" title="Le contraste" class="md-nav__link">
      Le contraste
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../definitions/" title="Définitions" class="md-nav__link">
      Définitions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Historique des versions" class="md-nav__link">
      Historique des versions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Contribute
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Contribute
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-create-a-basemap-for-Khartis/" title="Add a basemap" class="md-nav__link">
      Add a basemap
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table des matières</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recuperer-le-fond-de-carte" title="Récupérer le fond de carte" class="md-nav__link">
    Récupérer le fond de carte
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperer-les-donnees" title="Récupérer les données" class="md-nav__link">
    Récupérer les données
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importer-le-fond-de-carte-dans-khartis" title="Importer le fond de carte dans Khartis" class="md-nav__link">
    Importer le fond de carte dans Khartis
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-selection-de-lidentifiant" title="1. Sélection de l'identifiant" class="md-nav__link">
    1. Sélection de l'identifiant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-conserver-les-autres-variables" title="2. Conserver les autres variables ?" class="md-nav__link">
    2. Conserver les autres variables ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-simplification-optionnel-et-selon-le-fond" title="3. Simplification (optionnel et selon le fond)" class="md-nav__link">
    3. Simplification (optionnel et selon le fond)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-options-de-projection-optionnel" title="4. Options de projection (optionnel)" class="md-nav__link">
    4. Options de projection (optionnel)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importer-les-donnees-et-visualiser" title="Importer les données et visualiser" class="md-nav__link">
    Importer les données et visualiser
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/AtelierCartographie/Khartis/edit/master/docs/importer-propre-fond.md" title="Editer cette page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Importer son propre fond de carte</h1>
                
                <p>Nous allons réaliser une carte de l'abstention au second tour de l'élection présidentielle de 2017, à Nantes et par bureau de vote.</p>
<p><img alt="import-final" src="../assets/tuto3-9.png" /></p>
<h2 id="recuperer-le-fond-de-carte">Récupérer le fond de carte</h2>
<p>La plateforme open data de Nantes met à disposition <a href="https://data.nantesmetropole.fr/explore/dataset/244400404_decoupage-geographique-bureaux-vote-nantes/export/?disjunctive.lieu_nom&amp;disjunctive.lieu_site">le découpage géographique des bureaux de vote de la ville</a>.
Plusieurs formats d'export sont disponibles dont deux sont compatibles avec Khartis : geojson et shapefile.
<img alt="aperçu plateforme" src="../assets/tuto3-1.png" /></p>
<p>Nous allons utiliser le format geojson que vous pouvez <a href="../assets/decoupage-geographique-bureaux-vote-nantes.geojson">récupérer directement ici</a> (clic droit 'enregistrer le lien sous').</p>
<blockquote>
<p><strong>Notion clé</strong>
Khartis supporte trois formats :
-   geojson (contenu dans un seul fichier à l'extension .geojson ou .json)
-   shapefile (en fait au moins 3 fichiers avec les extensions .shp, .dbf et .prj)
-   topojson (contenu dans un seul fichier à l'extension .topojson ou .json)</p>
</blockquote>
<h2 id="recuperer-les-donnees">Récupérer les données</h2>
<p>Maintenant que nous avons un fond de carte, il nous faut chercher des données électorales par bureau de vote. Cette même plateforme open data de Nantes propose <a href="https://data.nantesmetropole.fr/explore/?disjunctive.diffuseur&amp;disjunctive.theme&amp;disjunctive.features&amp;disjunctive.publisher&amp;disjunctive.gestionnaire&amp;disjunctive.keyword&amp;disjunctive.license&amp;sort=explore.popularity_score&amp;q=bureau+de+vote">plusieurs résultats d'élections</a> à cette échelle.
Pour cet exemple nous choisissons les résultats du second tour de l'élection présidentielle de 2017 en <a href="https://data.nantesmetropole.fr/explore/dataset/244400404_election-presidentielle-2017-nantes-2nd-tour/export/?disjunctive.bureau_de_vote">téléchargeant le format csv</a>.
L'aperçu des données depuis la plateforme montre que les résultats sont exprimés en nombre de votes.
<img alt="aperçu tableau" src="../assets/tuto3-2.png" /></p>
<p>Pour envisager des visualisations plus riches et variés dans Khartis, il est possible de calculer les résultats en pourcentage à l'aide d'un tableur. Le <a href="../assets/Nantes-résultat-presidentielles-second-tour-2017-bureau-vote.csv">nouveau tableau après calculs est directement récupérable ici</a>.</p>
<h2 id="importer-le-fond-de-carte-dans-khartis">Importer le fond de carte dans Khartis</h2>
<p>Nous pouvons ouvrir <a href="https://www.sciencespo.fr/cartographie/khartis">Khartis</a>. Pour visualiser les résultats du vote, il nous faut d'abord importer le fond de carte. Cette opération s'effectue en deux étapes : 1. cliquer sur le bouton "Importer son propre fond", 2. glisser ou sélectionner le fichier geojson récupéré précédemment.
<img alt="import-fond" src="../assets/tuto3-3.gif" /></p>
<p>En quelques étapes Khartis va tester et rendre compatible le fond de carte.</p>
<h3 id="1-selection-de-lidentifiant">1. Sélection de l'identifiant</h3>
<p>Le fond de carte importé contient des données propres, sous forme de variables. Celles-ci sont généralement organisées en colonnes. Une de ces variables permet d'identifier de manière unique chaque entité géographique du fond (chacun des bureaux de vote).
Dans notre cas elle s'appelle <strong>idburo</strong>, un numéro unique de bureau de vote.
Nous la sélectionnons et cliquons sur le bouton suivant.
<img alt="import-choix-ID" src="../assets/tuto3-4.png" /></p>
<h3 id="2-conserver-les-autres-variables">2. Conserver les autres variables ?</h3>
<p>Pour comprendre la raison de cette question, faisons un détour plus général avant de revenir à notre carte des élections.</p>
<blockquote>
<p><strong>Notion clé</strong>
Lorsque on importe son propre fond dans Khartis, deux cas de figures se présentent :
-   le fond contient les données que l'on veut représenter, par exemple une variable population dans un fond par commune.
-   le fond ne contient que la géométrie avec un identifiant. Il faut dans ce cas un fichier-tableau avec les données, distinct du fond.</p>
<p>Dans le premier cas, Khartis permet de conserver les autres variables pour les visualiser ensuite.
Dans le second cas, seule la variable servant d'identifiant est conservée. Elle permettra de faire le lien avec le tableau de données qui devra comporter une variable avec les mêmes identifiants que ceux du fond de carte.</p>
</blockquote>
<p>Revenons maintenant à notre fond des bureaux de vote à Nantes. Nous avons deux fichiers distincts, nous sommes dans le second cas : un fond de carte et un tableau de données.</p>
<p><img alt="import-choix-conserver-variables" src="../assets/tuto3-5.png" /></p>
<h3 id="3-simplification-optionnel-et-selon-le-fond">3. Simplification (optionnel et selon le fond)</h3>
<p>Cette étape n'apparait pas systématiquement et dépend du niveau de détail du fond de carte importé. Lorsque celui-ci est très détaillé, son poids augmente et Khartis peut être ralenti ou bloqué. Une simplification du tracé de la géométrie du fond est donc proposée. Khartis le fait de manière automatique et le tracé-résultat pourra présenter de légères différences avec le fond original.
<img alt="import-simplification" src="../assets/tuto3-6.png" /></p>
<h3 id="4-options-de-projection-optionnel">4. Options de projection (optionnel)</h3>
<p>Le fond que nous venons d'importer est présélectionné dans la liste et nous en avons un aperçu juste en dessous. Nous pourrions directement passer à l'import des données, mais il est possible, pour les utilisateurs avertis, de paramétrer la projection ; et cela plus finement que dans le précédent tutoriel <a href="../premiers-pas-avec-Khartis-(2)#projections">Premier pas avec Khartis (2)</a>.</p>
<blockquote>
<p><strong>Notion clé</strong>
Nous avons vu précédemment qu'un fichier de fond de carte contient des données organisées en variables. L'information sur la projection en fait aussi partie. Rappelons que la projection cartographique est l'étape mathématique qui transpose la Terre (une sphère) sur un plan en deux dimensions. Il existe des centaines de projections différentes avec des propriétés propres, plus ou moins adaptées selon les usages et les zones représentées. Une des projections les plus communes lors de la mise à disposition de fond cartographique est la <a href="https://fr.wikipedia.org/wiki/WGS_84">WGS84</a>.</p>
</blockquote>
<p><img alt="import-bouton-projection" src="../assets/tuto3-7.png" />
Dans notre cas, en cliquant sur le bouton "Options de projection", on peut voir que le fond est déjà projeté en WGS84. Nous pouvons changer cette projection. En quoi est-ce utile ? Dans le cas de Nantes la projection WGS84 est inadaptée. Elle déforme trop les formes et les surfaces. La projection officielle utilisée en France, la <a href="https://fr.wikipedia.org/wiki/Projection_conique_conforme_de_Lambert#Lambert_93">Lambert 93</a>, est plus adaptée.
<img alt="import-projection" src="../assets/tuto3-8.gif" /></p>
<p>Pour les utilisateurs avertis, les projections sont entièrement personnalisables grâce à l'application d'un code proj4. Les possibilités deviennent alors quasi-infinies. Les sites <a href="https://epsg.io/">EPSG.io</a> et <a href="http://projectionwizard.org/">Projection Wizard</a> sont une bonne porte d'entrée dans ce vaste domaine.</p>
<h2 id="importer-les-donnees-et-visualiser">Importer les données et visualiser</h2>
<p>À partir de maintenant les étapes sont similaires à celles présentées dans les deux tutoriels [Premier pas avec Khartis (1)](../premiers-pas-avec-Khartis-(1) et [Premier pas avec Khartis (2)](../premiers-pas-avec-Khartis-(2) :</p>
<ul>
<li>Glisser déposer le fichier csv précédemment téléchargé ;</li>
<li>Vérifier que le bon identifiant est sélectionné et vérifier le typage des données (texte ou numérique) ;</li>
<li>Ajouter une ou des visualisations. Dans notre cas le taux d'abstention par bureau de vote à l'aide de la visualisation <strong>couleurs ordonnées</strong>. Pour en savoir plus sur les réglages consulter la <a href="../couleurs-ordonnees">page d'aide dédiée</a> ;</li>
<li>Habiller la carte avec les éléments essentiels (titre, source, auteur) et facultatifs (étiquettes, personnalisation de la légende) ;</li>
<li>Sauvegarder et exporter la carte.</li>
</ul>
<p>Un aperçu d'un résultat est disponible ci-dessous et le projet Khartis peut-être <a href="../assets/Projet-Khartis-Nantes-abstention-2017.kh">récupéré directement ici</a></p>
<p><img alt="import-final" src="../assets/tuto3-9.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../premiers-pas-avec-Khartis-(2)/" title="Premiers pas avec Khartis (2)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Précédent
                </span>
                Premiers pas avec Khartis (2)
              </span>
            </div>
          </a>
        
        
          <a href="../gestion-etiquettes/" title="Gestion des étiquettes" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Suivant
                </span>
                Gestion des étiquettes
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Creative Commons CC BY NC ND
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../assets/javascripts/lunr/lunr.fr.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../extra.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-78393617-2","Khartis"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>